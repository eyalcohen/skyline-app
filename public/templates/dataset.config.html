<%
  var data = this.model.attributes;
  var disabled = this.model.get('author').id !== this.app.profile.user.id ? 'disabled' : 'enabled';
%>

<div class="leftside settings">
  <span class="reset-error page-error"></span>
  <form enctype="multipart/form-data" method="POST">
    <table>
      <tbody>

        <tr>
          <td colspan = "2">
            <div class="settings-svg"></div>
          </td>
        </tr>

        <tr>
          <td>
            <label for="datasetTitle">Title</label>
          </td>
          <td class="textright">
            <div class="settings-saved">
              <span class="icon-check"></span>
              <span>Saved</span>
            </div>
            <span class="settings-error page-error"></span>
          </td>
        </tr>
        <tr>
          <td>
            <input type="text" tabindex="1" id="datasetTitle" name="title"
                placeholder="title" value="<%= data.title %>" <%= disabled %>/>
          </td>
          <td style="width:84px">
            <label class="checkbox-styled input-checkbox">
              <input class="settings-public" type="checkbox" name="public" value="public" <%= disabled %>/>
              <span style="padding:0; width:84px;"><i class="icon-lock-open"></i> Public</span>
            </label>
          </td>

        </tr>

        <tr>
          <td>
            <label for="datasetTags">Tags</label>
          </td>
          <td class="textright">
            <div class="settings-saved">
              <span class="icon-check"></span>
              <span>Saved</span>
            </div>
            <span class="settings-error page-error"></span>
          </td>
        </tr>
        <tr>
          <td colspan = "2">
            <input type="text" tabindex="2" id="datasetTags" name="tags"
                placeholder="tags" value="<%= data.tags %>" <%= disabled %>/>
          </td>
        </tr>

        <tr>
          <td>
            <label for="datasetDescription">Description</label>
          </td>
          <td class="textright">
            <div class="settings-saved">
              <span class="icon-check"></span>
              <span>Saved</span>
            </div>
            <span class="settings-error page-error"></span>
          </td>
        </tr>
        <tr>
          <td colspan = "2">
            <textarea name="description" class="" tabindex="3" id="datasetDescription"
                  placeholder="Write something about your data..." <%= disabled %>><%= data.description %>
            </textarea>
          </td>
        </tr>

        <tr>
          <td>
            <label for="datasetSource">Source</label>
          </td>
          <td class="textright">
            <div class="settings-saved">
              <span class="icon-check"></span>
              <span>Saved</span>
            </div>
            <span class="settings-error page-error"></span>
          </td>
        </tr>
        <tr>
          <td colspan = "2">
            <input type="text" tabindex="4" id="datasetSource" name="source"
                placeholder="source" value="<%= data.source %>" <%= disabled %> />
          </td>
        </tr>

        <tr>
          <td>
            <label for="datasetSourceLink">Source Link</label>
          </td>
          <td class="textright">
            <div class="settings-saved">
              <span class="icon-check"></span>
              <span>Saved</span>
            </div>
            <span class="settings-error page-error"></span>
          </td>
        </tr>
        <tr>
          <td colspan = "2">
            <input type="text" tabindex="5" id="datasetSourceLink" name="sourceLink"
                placeholder="link" value="<%= data.sourceLink %>" <%= disabled %>/>
          </td>
        </tr>

        <tr>
          <td colspan="2">
            <a tabindex="6" href="javascript:;" class="demolish button connect-button delete-button">
              Delete Dataset
              <i class="icon-right-open-big"></i>
            </a>
          </td>
        </tr>

      </tbody>
    </table>
  </form>
</div>
<div class="rightside">
  <p>
    This dataset was created on
     <strong> <%= util.toLocaleString(new Date(data.created), 'mediumDate') %> </strong>
    <% if (data.created !== data.updated) { %>
     and was last updated on
     <strong> <%= util.toLocaleString(new Date(data.updated), 'mediumDate') %> </strong>
    <% } %>
     .
  </p>
  <br>
  <p>
    This dataset contains <strong> <%= this.model.get('channels').length %> </strong> channels.
  </p>
  <br>
  <span> Channels: </span>
  <% _.each(this.model.get('channels'), function(c, idx) { %>
    <a href="/<%= this.model.get('author').username %>/<%= this.model.get('id') %>/<%= c.channelName %>"> <%= c.humanName %>
    </a>
    <% if (idx !== this.model.get('channels').length - 1) { %>
    <span> - </span>
    <% } %>
  <% }, this); %>

</div>
<div class="clearfix"></div>
<div class="footer">
  <ul>
    <li>
      <a href="/contact" class="navigate">Contact</a>
    </li>
    <li>
      <a href="/privacy" class="navigate">Privacy Policy</a>
    </li>
    <li>
      <a href="/terms" class="navigate">Terms of Use</a>
    </li>
  </ul>
</div>
