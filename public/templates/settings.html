<%

  // Save model attributes
  var data = this.model.attributes;

  // Gravatar
  var gravatar = 'https://www.gravatar.com/avatar/' + data.gravatar + '?s=24&d=identicon';

  // Notifications config
  var notes = data.config.notifications;
  var privacy = data.config.privacy;

%>

<div class="leftside settings profile-settings">
  <form enctype="multipart/form-data" method="POST">
    <h2 class="settings-divider">Profile Information</h2>
    <table>
      <tbody>
        <tr>
          <td colspan="2">
            <label for="displayName">Display Name</label>
          </td>
        </tr>
        <tr>
          <td colspan="2">
            <input type="text" tabindex="1" id="displayName" name="displayName"
                placeholder="How your name appears..." value="<%= data.displayName %>" />
          </td>
        </tr>
        <tr>
          <td colspan="2">
            <label for="username">Username</label>
          </td>
        </tr>
        <tr>
          <td colspan="2">
            <input type="text" tabindex="2" id="username" name="username" 
                placeholder="(required)" value="<%= data.username %>" />
          </td>
        </tr>
        <tr>
          <td colspan="2">
            <label for="primaryEmail">Email address (private)</label>
          </td>
        </tr>
        <tr>
          <td colspan="2">
            <input type="text" tabindex="3" id="primaryEmail" name="primaryEmail"
                placeholder="Used for notifications..." value="<%= data.primaryEmail %>" />
          </td>
        </tr>
        <tr>
          <td colspan="2" class="settings-gravatar">
            <img src=<%= gravatar %> width="24" height="24" />
            <a href="http://gravatar.com" class="important" target="_blank">Change your avatar at Gravatar.com</a>
          </td>
        </tr>
      </tbody>
    </table>
    <h2 class="settings-divider">Privacy</h2>
    <table>
      <tbody>
        <tr>
          <td colspan="2">
            <span class="settings-detail-txt">Enhanced Privacy Mode</span>
          </td>
        </tr>
        <tr>
          <td colspan="2" style="padding-top: 5px;">
            <% if (privacy.mode === 0 || privacy.mode === '0') { %>
              <input tabindex="9" type="radio" name="config.privacy.mode"
                  value="0" checked="checked" id="config.privacy.mode.0" />
            <% } else { %>
              <input tabindex="9" type="radio" name="config.privacy.mode"
                  value="0" id="config.privacy.mode.0" />
            <% } %>
            <label for="config.privacy.mode.0" style="vertical-align:-1px;">Off</label>
          </td>
        </tr>
        <tr>
          <td colspan="2">
            <ul class="settings-detail-txt settings-detail-list">
              <li>Logged-in Skyline users can follow you.</li>
              <li>Anyone can see your activities on your Skyline Profile.</li>
            </ul>
          </td>
        </tr>
        <tr>
          <td colspan="2" style="padding-top: 5px;">
            <% if (privacy.mode === 1 || privacy.mode === '1') { %>
              <input tabindex="10" type="radio" name="config.privacy.mode"
                  value="1" checked="checked" id="config.privacy.mode.1" />
            <% } else { %>
              <input tabindex="10" type="radio" name="config.privacy.mode"
                  value="1" id="config.privacy.mode.1" />
            <% } %>
            <label for="config.privacy.mode.1" style="vertical-align:-1px;">On</label>
          </td>
        </tr>
        <tr>
          <td colspan="2">
            <ul class="settings-detail-txt settings-detail-list">
              <li>Only Skyline users that you approve can follow you.</li>
              <li>Only approved followers can see your activities on your Skyline Profile.</li>
            </ul>
          </td>
        </tr>
      </tbody>
    </table>
    <h2 class="settings-divider">Notification Settings</h2>
    <table>
      <tbody>
        <tr>
          <td>
            <span class="settings-notification-item">Receive comment thread notifications?</span>
          </td>
          <td class="textright">
            <% if (notes.comment.email === true || notes.comment.email === 'true') { %>
              <input type="checkbox" name="config.notifications.comment.email"
                  tabindex="4" checked="checked" />
            <% } else { %>
              <input type="checkbox" name="config.notifications.comment.email" />
            <% } %>
            <label for="config.notifications.comment.email"
                tabindex="5" style="vertical-align:-1px;">Email (requires address above)</label>
          </td>
        </tr>

        <tr>
          <td>
            <span class="settings-notification-item">Receive note thread notifications?</span>
          </td>
          <td class="textright">
            <% if (notes.note.email === true || notes.note.email === 'true') { %>
              <input type="checkbox" name="config.notifications.note.email"
                  tabindex="4" checked="checked" />
            <% } else { %>
              <input type="checkbox" name="config.notifications.note.email" />
            <% } %>
            <label for="config.notifications.note.email"
                tabindex="5" style="vertical-align:-1px;">Email</label>
          </td>
        </tr>

        <tr>
          <td>
            <span class="settings-notification-item">Receive new follower notifications?</span>
          </td>
          <td class="textright">
            <% if (notes.follow.email === true || notes.follow.email === 'true') { %>
              <input type="checkbox" name="config.notifications.follow.email"
                  tabindex="4" checked="checked" />
            <% } else { %>
              <input type="checkbox" name="config.notifications.follow.email" />
            <% } %>
            <label for="config.notifications.follow.email"
                tabindex="5" style="vertical-align:-1px;">Email</label>
          </td>
        </tr>

      </tbody>
    </table>
    <h2 class="settings-divider">Services</h2>
    <table>
      <tbody>
        <tr>
          <td colspan="2">
            <% if (!data.facebookId) { %>
              <a tabindex="7" class="button connect-button facebook-button" href="/connect/facebook">
                Connect with Facebook
                <i class="icon-right-open-big"></i>
              </a>
            <% } else { %>
              <a class="button connect-button facebook-button-disabled" href="javascript:;">
                Connected with Facebook
              </a>
            <% } %>
            <% if (!data.twitterId) { %>
              <a tabindex="8" class="button connect-button twitter-button" href="/connect/twitter">
                Connect with Twitter
                <i class="icon-right-open-big"></i>
              </a>
            <% } else { %>
              <a class="button connect-button twitter-button-disabled" href="javascript:;">
                Connected with Twitter
              </a>
            <% } %>
          </td>
        </tr>
      </tbody>
    </table>
    <% if (data.provider === 'local') { %>
      <h2 class="settings-divider">Security</h2>
      <table>
        <tbody>
          <tr>
            <td colspan="2">
              <a tabindex="9" href="/reset" class="button connect-button password-button navigate">
                Change your password
                <i class="icon-right-open-big"></i>
              </a>
            </td>
          </tr>
        </tbody>
      </table>
    <% } %>
    <h2 class="settings-divider">Danger Zone</h2>
    <table>
      <tbody>
        <tr>
          <td colspan="2">
            <a tabindex="10" href="javascript:;" class="demolish button connect-button delete-button">
              Delete profile
              <i class="icon-right-open-big"></i>
            </a>
          </td>
        </tr>
      </tbody>
    </table>
  </form>
</div>
<div class="rightside">
  
</div>
<div class="clearfix"></div>
<div class="footer">
  <ul>
    <li>
      <a href="/contact" class="navigate">Contact</a>
    </li>
    <li>
      <a href="/privacy" class="navigate">Privacy Policy</a>
    </li>
    <li>
      <a href="/terms" class="navigate">Terms of Use</a>
    </li>
  </ul>
</div>
